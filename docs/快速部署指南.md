# IMX6ULL é¡¹ç›®å¿«é€Ÿéƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•åœ¨æ–°æœºå™¨ä¸Šå¿«é€Ÿéƒ¨ç½²å’Œç¼–è¯‘IMX6ULLé¡¹ç›®ã€‚

## ğŸš€ ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

å¦‚æœä½ æƒ³å¿«é€Ÿå¼€å§‹ï¼Œåªéœ€è¿è¡Œï¼š

```bash
git clone <your-repo-url> imx6ull
cd imx6ull
chmod +x quick_setup.sh
./quick_setup.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
1. âœ… æ£€æŸ¥ç³»ç»Ÿä¾èµ–
2. âœ… å®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼ˆå¯é€‰ï¼‰
3. âœ… éªŒè¯Qtåº“
4. âœ… é…ç½®é¡¹ç›®
5. âœ… ç¼–è¯‘é¡¹ç›®

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€è½¯ä»¶
- Ubuntu 16.04/18.04/20.04 æˆ–ç±»ä¼¼Linuxå‘è¡Œç‰ˆ
- CMake 3.5+
- Make
- Git
- GCC/G++ï¼ˆä¸»æœºç¼–è¯‘å™¨ï¼Œç”¨äºæ„å»ºå·¥å…·ï¼‰

### ç£ç›˜ç©ºé—´
- äº¤å‰ç¼–è¯‘å·¥å…·é“¾: ~3-5 GB
- Qtåº“ï¼ˆå·²åŒ…å«åœ¨é¡¹ç›®ä¸­ï¼‰: ~47 MB
- é¡¹ç›®æ„å»ºäº§ç‰©: ~50-100 MB
- **æ€»è®¡: çº¦ 4-6 GB**

## ğŸ“¦ åˆ†æ­¥éƒ¨ç½²æŒ‡å—

### æ­¥éª¤1: å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url> imx6ull
cd imx6ull
```

é¡¹ç›®å·²åŒ…å«Qt5åº“ï¼Œæ— éœ€é¢å¤–ä¸‹è½½ï¼

### æ­¥éª¤2: å®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·é“¾

#### æ–¹æ³•A: ä½¿ç”¨è‡ªåŠ¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
chmod +x setup_toolchain.sh
sudo ./setup_toolchain.sh
```

è„šæœ¬ä¼šï¼š
- æ£€æŸ¥æ˜¯å¦å·²å®‰è£…
- å®‰è£…åˆ° `/opt/fsl-imx-x11/4.1.15-2.1.0/`
- é…ç½®ç¯å¢ƒå˜é‡
- åˆ›å»ºä¾¿æ·å‘½ä»¤

#### æ–¹æ³•B: æ‰‹åŠ¨å®‰è£…

1. ä»NXPå®˜ç½‘æˆ–æä¾›çš„é“¾æ¥ä¸‹è½½å·¥å…·é“¾
2. è¿è¡Œå®‰è£…ç¨‹åºï¼š
   ```bash
   chmod +x fsl-imx-x11-glibc-x86_64-*.sh
   sudo ./fsl-imx-x11-glibc-x86_64-*.sh -d /opt/fsl-imx-x11/4.1.15-2.1.0/
   ```

3. åŠ è½½ç¯å¢ƒï¼š
   ```bash
   source env-setup.sh
   ```

### æ­¥éª¤3: ç¼–è¯‘é¡¹ç›®

```bash
# åˆ›å»ºæ„å»ºç›®å½•
mkdir -p build-arm
cd build-arm

# é…ç½®é¡¹ç›®
cmake ..

# ç¼–è¯‘ï¼ˆä½¿ç”¨æ‰€æœ‰CPUæ ¸å¿ƒï¼‰
make -j$(nproc)
```

ç¼–è¯‘æˆåŠŸåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äº: `build-arm/bin/QtImx6ullBackend`

### æ­¥éª¤4: éªŒè¯æ„å»º

```bash
# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..

# è¿è¡ŒéªŒè¯è„šæœ¬
./verify_qt_libs.sh
```

éªŒè¯è„šæœ¬ä¼šæ£€æŸ¥ï¼š
- âœ… å¯æ‰§è¡Œæ–‡ä»¶å­˜åœ¨
- âœ… ARMæ¶æ„æ­£ç¡®
- âœ… RPATHé…ç½®
- âœ… Qtåº“ä¾èµ–
- âœ… è·¯å¾„è§£æ

## ğŸ”§ å·¥å…·é“¾ç¯å¢ƒç®¡ç†

### åŠ è½½å·¥å…·é“¾ç¯å¢ƒ

```bash
# æ–¹æ³•1: ä½¿ç”¨å¿«æ·å‘½ä»¤ï¼ˆå¦‚æœè¿è¡Œäº†setup_toolchain.shï¼‰
imx6ull-env

# æ–¹æ³•2: ä½¿ç”¨é¡¹ç›®ç¯å¢ƒè„šæœ¬
source env-setup.sh

# æ–¹æ³•3: ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒæ–‡ä»¶
source /etc/profile.d/imx6ull-toolchain.sh
```

### éªŒè¯å·¥å…·é“¾

```bash
# æ£€æŸ¥ç¼–è¯‘å™¨
arm-poky-linux-gnueabi-gcc --version

# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $CROSS_COMPILE
echo $SYSROOT_PATH
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
imx6ull/
â”œâ”€â”€ CMakeLists.txt              # CMakeé…ç½®
â”œâ”€â”€ env-setup.sh                # ç¯å¢ƒè®¾ç½®è„šæœ¬
â”œâ”€â”€ quick_setup.sh              # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ setup_toolchain.sh          # å·¥å…·é“¾å®‰è£…è„šæœ¬
â”œâ”€â”€ copy_qt_libs.sh             # Qtåº“å¤åˆ¶è„šæœ¬
â”œâ”€â”€ verify_qt_libs.sh           # é…ç½®éªŒè¯è„šæœ¬
â”œâ”€â”€ rebuild.sh                  # å¿«é€Ÿé‡æ–°ç¼–è¯‘
â”œâ”€â”€ include/                    # å¤´æ–‡ä»¶
â”œâ”€â”€ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒå±‚
â”‚   â”œâ”€â”€ drivers/                # é©±åŠ¨å±‚
â”‚   â”œâ”€â”€ services/               # æœåŠ¡å±‚
â”‚   â””â”€â”€ protocols/              # åè®®å±‚
â”œâ”€â”€ third_party/                # ç¬¬ä¸‰æ–¹åº“
â”‚   â””â”€â”€ qt5/                    # Qt5åº“ï¼ˆå·²åŒ…å«ï¼‰
â”‚       â”œâ”€â”€ lib/                # Qtåº“æ–‡ä»¶
â”‚       â”œâ”€â”€ include/            # Qtå¤´æ–‡ä»¶
â”‚       â”œâ”€â”€ cmake/              # CMakeé…ç½®
â”‚       â””â”€â”€ plugins/            # Qtæ’ä»¶
â”œâ”€â”€ build-arm/                  # ARMæ„å»ºç›®å½•ï¼ˆ.gitignoreï¼‰
â”œâ”€â”€ tools/                      # å·¥å…·è„šæœ¬
â””â”€â”€ docs/                       # æ–‡æ¡£
```

## ğŸ¯ å¸¸è§ä»»åŠ¡

### æ¸…ç†æ„å»º

```bash
rm -rf build-arm
```

### é‡æ–°ç¼–è¯‘

```bash
cd build-arm
make -j$(nproc)
```

æˆ–ä½¿ç”¨å¿«é€Ÿè„šæœ¬ï¼š
```bash
./rebuild.sh
```

### åªç¼–è¯‘ç‰¹å®šç›®æ ‡

```bash
cd build-arm
make QtImx6ullBackend -j$(nproc)
```

### æŸ¥çœ‹ç¼–è¯‘è¯¦æƒ…

```bash
cd build-arm
make VERBOSE=1
```

## ğŸš¢ éƒ¨ç½²åˆ°ç›®æ ‡è®¾å¤‡

### æ‰“åŒ…éƒ¨ç½²æ–‡ä»¶

```bash
# åˆ›å»ºéƒ¨ç½²åŒ…
mkdir -p deploy
cp build-arm/bin/QtImx6ullBackend deploy/
cp -r third_party/qt5/lib deploy/
cp hardware.init deploy/

# æ‰“åŒ…
tar -czf imx6ull-deploy.tar.gz deploy/
```

### ä¼ è¾“åˆ°è®¾å¤‡

```bash
# ä½¿ç”¨scp
scp imx6ull-deploy.tar.gz root@192.168.1.100:/home/root/

# åœ¨è®¾å¤‡ä¸Šè§£å‹
ssh root@192.168.1.100
cd /home/root
tar -xzf imx6ull-deploy.tar.gz
cd deploy
```

### åœ¨è®¾å¤‡ä¸Šè¿è¡Œ

```bash
# è®¾ç½®åº“è·¯å¾„
export LD_LIBRARY_PATH=$PWD/lib:$LD_LIBRARY_PATH

# è¿è¡Œç¨‹åº
./QtImx6ullBackend
```

## âš ï¸ æ•…éšœæ’é™¤

### é—®é¢˜: æ‰¾ä¸åˆ°Qtåº“

**è§£å†³æ–¹æ¡ˆ:**
```bash
# æ£€æŸ¥Qtåº“
ls -la third_party/qt5/lib/libQt5*.so.5

# å¦‚æœç¼ºå¤±ï¼Œè¿è¡Œ
./copy_qt_libs.sh
```

### é—®é¢˜: ç¼–è¯‘å™¨æœªæ‰¾åˆ°

**è§£å†³æ–¹æ¡ˆ:**
```bash
# æ£€æŸ¥å·¥å…·é“¾è·¯å¾„
ls -la /opt/fsl-imx-x11/4.1.15-2.1.0/

# é‡æ–°åŠ è½½ç¯å¢ƒ
source env-setup.sh

# æˆ–é‡æ–°å®‰è£…å·¥å…·é“¾
sudo ./setup_toolchain.sh
```

### é—®é¢˜: CMakeé…ç½®å¤±è´¥

**è§£å†³æ–¹æ¡ˆ:**
```bash
# æ¸…ç†CMakeç¼“å­˜
rm -rf build-arm/CMakeCache.txt build-arm/CMakeFiles

# é‡æ–°é…ç½®
cd build-arm
cmake ..
```

### é—®é¢˜: ä¾èµ–åº“ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ:**
```bash
# Ubuntu/Debian
sudo apt-get install build-essential cmake git

# CentOS/RHEL
sudo yum install gcc gcc-c++ make cmake git
```

## ğŸ“š æ›´å¤šèµ„æº

- **éªŒè¯è„šæœ¬**: è¿è¡Œ `./verify_qt_libs.sh` æŸ¥çœ‹è¯¦ç»†é…ç½®
- **ç¯å¢ƒè®¾ç½®**: æŸ¥çœ‹ `env-setup.sh` äº†è§£ç¯å¢ƒå˜é‡
- **å·¥å…·è„šæœ¬**: `tools/` ç›®å½•åŒ…å«å„ç§æµ‹è¯•å’Œè¾…åŠ©è„šæœ¬
- **æ–‡æ¡£**: `docs/` ç›®å½•åŒ…å«æ›´å¤šæŠ€æœ¯æ–‡æ¡£

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡éƒ¨ç½²**: ä½¿ç”¨ `quick_setup.sh` ä¸€é”®å®Œæˆæ‰€æœ‰é…ç½®
2. **æ—¥å¸¸å¼€å‘**: ä½¿ç”¨ `rebuild.sh` å¿«é€Ÿé‡æ–°ç¼–è¯‘
3. **æ›´æ¢æœºå™¨**: åªéœ€å…‹éš†ä»“åº“å¹¶è¿è¡Œ `quick_setup.sh`
4. **Qtåº“æ›´æ–°**: å¦‚æœéœ€è¦æ›´æ–°Qtç‰ˆæœ¬ï¼Œä¿®æ”¹ `copy_qt_libs.sh` å¹¶é‡æ–°è¿è¡Œ
5. **å·¥å…·é“¾ç‰ˆæœ¬**: å¦‚éœ€ä½¿ç”¨ä¸åŒç‰ˆæœ¬ï¼Œä¿®æ”¹ `setup_toolchain.sh` ä¸­çš„é…ç½®

## ğŸ‰ æˆåŠŸæ ‡å¿—

å¦‚æœçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸï¼š

```
==========================================
âœ“âœ“âœ“ éƒ¨ç½²å®Œæˆï¼ âœ“âœ“âœ“
==========================================

æ„å»ºä¿¡æ¯:
  - å¯æ‰§è¡Œæ–‡ä»¶: /path/to/build-arm/bin/QtImx6ullBackend
  - æ„å»ºç›®å½•: /path/to/build-arm
  - Qtåº“ç›®å½•: /path/to/third_party/qt5/lib

âœ“ æ‰€æœ‰Qtåº“é…ç½®æ­£ç¡®ï¼
```

ç°åœ¨ä½ å¯ä»¥å°†é¡¹ç›®éƒ¨ç½²åˆ°IMX6ULLè®¾å¤‡ä¸Šäº†ï¼ğŸš€

