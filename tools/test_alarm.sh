#!/bin/bash
########################################################################
# 脚本名称: test_alarm.sh
# 功能描述: 测试闹钟服务的工作日判断功能
# 作者: Alex
# 日期: 2025-10-15
########################################################################

echo "========================================="
echo "闹钟服务工作日判断测试"
echo "========================================="
echo ""

# 测试日期列表（2025年）
test_dates=(
    "2025-01-01:元旦（法定节假日）:休息日"
    "2025-01-26:春节前周日（补班）:工作日"
    "2025-01-28:春节除夕:休息日"
    "2025-02-08:春节后周六（补班）:工作日"
    "2025-04-05:清明节:休息日"
    "2025-04-27:劳动节前周日（补班）:工作日"
    "2025-05-01:劳动节:休息日"
    "2025-06-01:端午节:休息日"
    "2025-09-28:中秋节前周日（补班）:工作日"
    "2025-09-29:国庆节前周一（补班）:工作日"
    "2025-10-01:国庆节:休息日"
    "2025-10-11:国庆节后周六（补班）:工作日"
    "2025-10-15:普通工作日（周三）:工作日"
    "2025-10-18:普通周末（周六）:休息日"
    "2025-10-19:普通周末（周日）:休息日"
    "2025-10-20:普通工作日（周一）:工作日"
)

echo "测试场景列表："
echo "----------------------------------------"
for item in "${test_dates[@]}"; do
    IFS=':' read -r date desc expected <<< "$item"
    echo "📅 $date | $desc | 预期: $expected"
done

echo ""
echo "========================================="
echo "💡 提示："
echo "----------------------------------------"
echo "1. 闹钟默认时间: 每个工作日早上 06:00"
echo "2. 工作日定义: 周一至周五 + 补班日 - 法定节假日"
echo "3. 铃声模式: 有节奏播放（3短1长循环）"
echo "4. 自动停止: 最多播放30次（约5分钟）"
echo ""
echo "========================================="
echo "📋 2025年完整节假日安排"
echo "----------------------------------------"
echo "✅ 元旦:     1月1日（放假1天）"
echo "✅ 春节:     1月28日-2月4日（放假8天）"
echo "   补班:    1月26日（周日）、2月8日（周六）"
echo ""
echo "✅ 清明节:   4月4-6日（放假3天）"
echo ""
echo "✅ 劳动节:   5月1-5日（放假5天）"
echo "   补班:    4月27日（周日）"
echo ""
echo "✅ 端午节:   5月31日-6月2日（放假3天）"
echo ""
echo "✅ 中秋节:   10月6-8日（放假3天）"
echo "   补班:    9月28日（周日）"
echo ""
echo "✅ 国庆节:   10月1-7日（放假7天，与中秋连休）"
echo "   补班:    9月29日（周一）、10月11日（周六）"
echo ""
echo "========================================="
echo "🔧 配置说明"
echo "----------------------------------------"
echo "文件位置: src/services/alarm/AlarmService.cpp"
echo "配置函数: initialize2025HolidayData()"
echo ""
echo "修改闹钟时间:"
echo "  文件: src/core/ServiceManager.cpp"
echo "  代码: pAlarmSvr->setAlarmTime(6, 0);  // 小时, 分钟"
echo ""
echo "禁用闹钟:"
echo "  代码: pAlarmSvr->setAlarmEnabled(false);"
echo ""
echo "========================================="
echo "📖 详细文档"
echo "----------------------------------------"
echo "请查阅: docs/AlarmService使用说明.md"
echo ""
echo "========================================="

